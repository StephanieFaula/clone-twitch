{"ast":null,"code":"var _jsxFileName = \"/Users/oceane/Documents/Sites/clone-twitch/frontend/src/components/Games/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport Config from '../Config';\n\nconst Games = () => {\n  const [games, setGames] = useState([]);\n  const [connexion, setConnexion] = useState(false);\n  let oToken = sessionStorage.getItem('theToken');\n  useEffect(() => {\n    //la déclaration async permet d'effectuer des actions de façon asynchrones. Ici, aller chercher des données ET les recevoir en même temps\n    const fetchData = async () => {\n      const result = await Axios.create({\n        headers: {\n          'Client-ID': Config.clientID,\n          'Authorization': 'Bearer ' + oToken\n        }\n      }).get('https://api.twitch.tv/helix/games/top');\n\n      if (result.status == 200) {\n        setConnexion(true);\n      } else {\n        setConnexion(false);\n      }\n\n      let dataArray = result.data.data;\n      let finalArray = dataArray.map(game => {\n        let newUrl = game.box_art_url.replace(\"{width}\", \"250\").replace(\"{height}\", \"300\");\n        game.box_art_url = newUrl;\n        return game;\n      });\n      setGames(finalArray);\n    };\n\n    fetchData();\n  }, []);\n  console.log(connexion); // console.log(games);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"titreGames\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 2\n    }\n  }, \"Jeux les plus populaires\"), connexion && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flexAccueil\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 2\n    }\n  }, games.map((game, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"carteGames\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: game.box_art_url,\n    alt: \"image-jeu\",\n    className: \"imgCarte\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cardBodyGames\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"titreCartesGames\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 2\n    }\n  }, game.name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btnCarte\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 2\n    }\n  }, \"Regarder \", game.name))))), !connexion && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"connexion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"https://id.twitch.tv/oauth2/authorize?client_id=lhvw6vqelrbmgygm5wekb9upiov0pc&redirect_uri=http://localhost:3000&response_type=code&scope=viewing_activity_read\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"button-connexion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 173\n    }\n  }, \"Se connecter\"))));\n};\n\nexport default Games;","map":{"version":3,"sources":["/Users/oceane/Documents/Sites/clone-twitch/frontend/src/components/Games/index.js"],"names":["React","useState","useEffect","Axios","Config","Games","games","setGames","connexion","setConnexion","oToken","sessionStorage","getItem","fetchData","result","create","headers","clientID","get","status","dataArray","data","finalArray","map","game","newUrl","box_art_url","replace","console","log","index","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport Config from '../Config';\n\nconst Games = () => {\n\n const [games, setGames] = useState([]);\n\n const [connexion, setConnexion] = useState(false);\n\n let oToken = sessionStorage.getItem('theToken');\n\n useEffect(() => {\n\n //la déclaration async permet d'effectuer des actions de façon asynchrones. Ici, aller chercher des données ET les recevoir en même temps\n const fetchData = async () => {\n\n const result = await Axios.create({\n headers: {\n 'Client-ID' : Config.clientID,\n 'Authorization' : 'Bearer ' + oToken\n }\n }).get('https://api.twitch.tv/helix/games/top');\n\n if(result.status == 200) {\n setConnexion(true);\n } else {\n setConnexion(false);\n }\n\n let dataArray = result.data.data;\n\n let finalArray = dataArray.map( game => {\n let newUrl = game.box_art_url\n .replace(\"{width}\", \"250\")\n .replace(\"{height}\", \"300\");\n\n game.box_art_url = newUrl;\n return game;\n });\n\n setGames(finalArray);\n\n }\n fetchData();\n\n }, [])\n\n console.log(connexion);\n // console.log(games);\n\n return(\n <div className=\"\">\n <h1 className=\"titreGames\">Jeux les plus populaires</h1>\n\n {connexion &&\n <div className=\"flexAccueil\">\n {games.map((game, index) => ( \n <div key={index} className=\"carteGames\">\n <img src={game.box_art_url} alt=\"image-jeu\" className=\"imgCarte\"/>\n <div className=\"cardBodyGames\">\n <h5 className=\"titreCartesGames\">{game.name}</h5>\n <div className=\"btnCarte\">Regarder {game.name}</div>\n </div>\n </div>\n ))}\n </div>\n }\n {!connexion &&\n <div className=\"connexion\">\n <a href=\"https://id.twitch.tv/oauth2/authorize?client_id=lhvw6vqelrbmgygm5wekb9upiov0pc&redirect_uri=http://localhost:3000&response_type=code&scope=viewing_activity_read\"><button type=\"button\" className=\"button-connexion\">Se connecter</button></a>\n </div>\n }\n </div>\n );\n\n}\n\nexport default Games;"]},"metadata":{},"sourceType":"module"}