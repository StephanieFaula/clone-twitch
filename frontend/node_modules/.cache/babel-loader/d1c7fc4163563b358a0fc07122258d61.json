{"ast":null,"code":"import _regeneratorRuntime from\"/Users/oceane/Documents/Sites/clone-twitch/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/oceane/Documents/Sites/clone-twitch/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/oceane/Documents/Sites/clone-twitch/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Axios from'axios';import Config from'../Config';import{Link,useParams}from'react-router-dom';import Erreur from'../Erreur';var Resultats=function Resultats(){var oToken=sessionStorage.getItem('theToken');var _useParams=useParams(),slug=_useParams.slug;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),streamerInfo=_useState4[0],setStreamerInfo=_useState4[1];//Ici, on remplace tous les espace vides par rien du tout: '' PLUS DESPACE VIDE\nvar cleanSearch=slug.replace(/ /g,'');useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.create({headers:{'Client-ID':Config.clientID,'Authorization':'Bearer '+oToken}}).get(\"https://api.twitch.tv/helix/users?login=\".concat(cleanSearch));case 2:result=_context.sent;// console.log(result);\nif(result.data.data.length===0){setResult(false);}else{setStreamerInfo(result.data.data);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[cleanSearch,oToken]);return result?/*#__PURE__*/React.createElement(\"div\",{className:\"containerDecaleResultats\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Resultats de la recherche : \"),streamerInfo.map(function(stream,index){return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"carteResultats\"},/*#__PURE__*/React.createElement(\"img\",{className:\"imgCarte\",src:stream.profile_image_url,alt:\"resultat profile\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"cardBodyResults\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"titreCartesStream\"},stream.display_name),/*#__PURE__*/React.createElement(\"div\",{className:\"txtResult\"},stream.description),/*#__PURE__*/React.createElement(Link,{className:\"lien\",to:{pathname:\"/live/\".concat(stream.login)}},/*#__PURE__*/React.createElement(\"div\",{className:\"btnCarte btnResult\"},\"Regarder \",stream.display_name))));})):/*#__PURE__*/React.createElement(Erreur,null);};export default Resultats;","map":{"version":3,"sources":["/Users/oceane/Documents/Sites/clone-twitch/frontend/src/components/Resultats/index.js"],"names":["React","useState","useEffect","Axios","Config","Link","useParams","Erreur","Resultats","oToken","sessionStorage","getItem","slug","result","setResult","streamerInfo","setStreamerInfo","cleanSearch","replace","fetchData","create","headers","clientID","get","data","length","map","stream","index","profile_image_url","display_name","description","pathname","login"],"mappings":"2fAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,OAASC,IAAT,CAAeC,SAAf,KAAgC,kBAAhC,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAEpB,GAAMC,CAAAA,MAAM,CAAGC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAf,CAFoB,eAIPL,SAAS,EAJF,CAIfM,IAJe,YAIfA,IAJe,eAMQX,QAAQ,CAAC,IAAD,CANhB,wCAMbY,MANa,eAMLC,SANK,8BAOoBb,QAAQ,CAAC,EAAD,CAP5B,yCAObc,YAPa,eAOCC,eAPD,eASpB;AACA,GAAIC,CAAAA,WAAW,CAAGL,IAAI,CAACM,OAAL,CAAa,IAAb,CAAkB,EAAlB,CAAlB,CAEAhB,SAAS,CAAC,UAAM,CACZ,GAAMiB,CAAAA,SAAS,0FAAG,oKACOhB,CAAAA,KAAK,CAACiB,MAAN,CAAa,CAC9BC,OAAO,CAAE,CACL,YAAcjB,MAAM,CAACkB,QADhB,CAEL,gBAAkB,UAAYb,MAFzB,CADqB,CAAb,EAKlBc,GALkB,mDAK6BN,WAL7B,EADP,QACRJ,MADQ,eAQd;AAEA,GAAGA,MAAM,CAACW,IAAP,CAAYA,IAAZ,CAAiBC,MAAjB,GAA4B,CAA/B,CAAkC,CAC9BX,SAAS,CAAC,KAAD,CAAT,CACH,CAFD,IAEO,CACHE,eAAe,CAACH,MAAM,CAACW,IAAP,CAAYA,IAAb,CAAf,CACH,CAda,sDAAH,kBAATL,CAAAA,SAAS,0CAAf,CAkBAA,SAAS,GACZ,CApBQ,CAoBN,CAACF,WAAD,CAAcR,MAAd,CApBM,CAAT,CAsBA,MAEII,CAAAA,MAAM,cAEF,2BAAK,SAAS,CAAC,0BAAf,eACI,6DADJ,CAEKE,YAAY,CAACW,GAAb,CAAiB,SAACC,MAAD,CAASC,KAAT,qBACd,2BAAK,GAAG,CAAEA,KAAV,CAAiB,SAAS,CAAC,gBAA3B,eACI,2BAAK,SAAS,CAAC,UAAf,CAA0B,GAAG,CAAED,MAAM,CAACE,iBAAtC,CAAyD,GAAG,CAAC,kBAA7D,EADJ,cAGI,2BAAK,SAAS,CAAC,iBAAf,eACI,0BAAI,SAAS,CAAC,mBAAd,EAAmCF,MAAM,CAACG,YAA1C,CADJ,cAEI,2BAAK,SAAS,CAAC,WAAf,EACKH,MAAM,CAACI,WADZ,CAFJ,cAKI,oBAAC,IAAD,EACA,SAAS,CAAC,MADV,CAEA,EAAE,CAAE,CACAC,QAAQ,iBAAWL,MAAM,CAACM,KAAlB,CADR,CAFJ,eAMI,2BAAK,SAAS,CAAC,oBAAf,cAA8CN,MAAM,CAACG,YAArD,CANJ,CALJ,CAHJ,CADc,EAAjB,CAFL,CAFE,cA4BN,oBAAC,MAAD,MA9BJ,CAgCH,CAlED,CAoEA,cAAetB,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport Config from '../Config';\nimport { Link, useParams } from 'react-router-dom';\nimport Erreur from '../Erreur';\n\nconst Resultats = () => {\n\n    const oToken = sessionStorage.getItem('theToken');\n\n    let {slug} = useParams();\n\n    const [result, setResult] = useState(true);\n    const [streamerInfo, setStreamerInfo] = useState([]);\n\n    //Ici, on remplace tous les espace vides par rien du tout: '' PLUS DESPACE VIDE\n    let cleanSearch = slug.replace(/ /g,'');\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const result = await Axios.create({\n                headers: {\n                    'Client-ID' : Config.clientID,\n                    'Authorization' : 'Bearer ' + oToken\n                }\n            }).get(`https://api.twitch.tv/helix/users?login=${cleanSearch}`);\n\n            // console.log(result);\n\n            if(result.data.data.length === 0) {\n                setResult(false);\n            } else {\n                setStreamerInfo(result.data.data);\n            }\n\n            \n        }\n        fetchData()\n    }, [cleanSearch, oToken])\n\n    return(\n\n        result ?\n\n            <div className=\"containerDecaleResultats\">\n                <h4>Resultats de la recherche : </h4>\n                {streamerInfo.map((stream, index) => (\n                    <div key={index} className=\"carteResultats\">\n                        <img className=\"imgCarte\" src={stream.profile_image_url} alt=\"resultat profile\"/>\n\n                        <div className=\"cardBodyResults\">\n                            <h5 className=\"titreCartesStream\">{stream.display_name}</h5>\n                            <div className=\"txtResult\">\n                                {stream.description}\n                            </div>\n                            <Link\n                            className=\"lien\"\n                            to={{\n                                pathname: `/live/${stream.login}`\n                            }}\n                            >\n                                <div className=\"btnCarte btnResult\">Regarder {stream.display_name}</div>\n                            </Link>\n                        </div>\n                    </div>\n                ))}\n            </div>\n\n        :\n\n        <Erreur />\n    )\n}\n\nexport default Resultats;"]},"metadata":{},"sourceType":"module"}