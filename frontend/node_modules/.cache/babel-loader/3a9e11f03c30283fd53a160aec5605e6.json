{"ast":null,"code":"import _regeneratorRuntime from\"/Users/oceane/Documents/Sites/clone-twitch/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/oceane/Documents/Sites/clone-twitch/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/oceane/Documents/Sites/clone-twitch/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Axios from'axios';import Config from'../Config';import{Link}from'react-router-dom';var Sidebar=function Sidebar(){var oToken=sessionStorage.getItem('theToken');var _useState=useState([]),_useState2=_slicedToArray(_useState,2),topStreams=_useState2[0],setTopStreams=_useState2[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,dataArray,gameIDs,userIDs,baseUrlGames,baseUrlUsers,queryParamsGame,queryParamsUsers,urlFinalGames,urlFinalUsers,gamesNames,getUsers,gamesNameArray,userArray,finalArray;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.create({headers:{'Client-ID':Config.clientID,'Authorization':'Bearer '+oToken}}).get('https://api.twitch.tv/helix/streams');case 2:result=_context.sent;dataArray=result.data.data;// console.log(dataArray);\ngameIDs=dataArray.map(function(stream){return stream.game_id;});userIDs=dataArray.map(function(stream){return stream.user_id;});//Creation des URLs personnalisées\nbaseUrlGames=\"https://api.twitch.tv/helix/games?\";baseUrlUsers=\"https://api.twitch.tv/helix/users?\";queryParamsGame=\"\";queryParamsUsers=\"\";gameIDs.map(function(id){return queryParamsGame=queryParamsGame+\"id=\".concat(id,\"&\");});userIDs.map(function(id){return queryParamsUsers=queryParamsUsers+\"id=\".concat(id,\"&\");});//URL final\nurlFinalGames=baseUrlGames+queryParamsGame;urlFinalUsers=baseUrlUsers+queryParamsUsers;//Appels\n_context.next=16;return Axios.create({headers:{'Client-ID':Config.clientID,'Authorization':'Bearer '+oToken}}).get(urlFinalGames);case 16:gamesNames=_context.sent;_context.next=19;return Axios.create({headers:{'Client-ID':Config.clientID,'Authorization':'Bearer '+oToken}}).get(urlFinalUsers);case 19:getUsers=_context.sent;gamesNameArray=gamesNames.data.data;userArray=getUsers.data.data;// console.log(gamesNameArray, userArray);\n//Création du tableau final\nfinalArray=dataArray.map(function(stream){stream.gameName=\"\";stream.truePic=\"\";stream.login=\"\";gamesNameArray.forEach(function(name){userArray.forEach(function(user){if(stream.user_id===user.id&&stream.game_id===name.id){stream.gameName=name.name;stream.truePic=user.profile_image_url;stream.login=user.login;}});});return stream;});setTopStreams(finalArray.slice(0,6));case 24:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[oToken]);// console.log(topStreams);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"titreSidebar\"},\"Chaines recommand\\xE9es\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"listeStream\"},topStreams.map(function(stream,index){return/*#__PURE__*/React.createElement(Link,{key:index,className:\"lien\",to:{pathname:\"/live/\".concat(stream.login)}},/*#__PURE__*/React.createElement(\"li\",{key:index,className:\"containerFlexSidebar\"},/*#__PURE__*/React.createElement(\"img\",{src:stream.truePic,className:\"profilePicRonde\",alt:\"logo user\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"streamUser\"},stream.user_name),/*#__PURE__*/React.createElement(\"div\",{className:\"viewerRight\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pointRouge\"}),/*#__PURE__*/React.createElement(\"div\",null,stream.viewer_count)),/*#__PURE__*/React.createElement(\"div\",{className:\"gameNameSidebar\"},stream.gameName)));})));};export default Sidebar;","map":{"version":3,"sources":["/Users/oceane/Documents/Sites/clone-twitch/frontend/src/components/Sidebar/index.js"],"names":["React","useEffect","useState","Axios","Config","Link","Sidebar","oToken","sessionStorage","getItem","topStreams","setTopStreams","fetchData","create","headers","clientID","get","result","dataArray","data","gameIDs","map","stream","game_id","userIDs","user_id","baseUrlGames","baseUrlUsers","queryParamsGame","queryParamsUsers","id","urlFinalGames","urlFinalUsers","gamesNames","getUsers","gamesNameArray","userArray","finalArray","gameName","truePic","login","forEach","name","user","profile_image_url","slice","index","pathname","user_name","viewer_count"],"mappings":"2fAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAErB,GAAMC,CAAAA,MAAM,CAAGC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAf,CAFqB,cAIeP,QAAQ,CAAC,EAAD,CAJvB,wCAIdQ,UAJc,eAIFC,aAJE,eAMrBV,SAAS,CAAC,UAAM,CAChB,GAAMW,CAAAA,SAAS,0FAAG,6UACGT,CAAAA,KAAK,CAACU,MAAN,CAAa,CAClCC,OAAO,CAAE,CACT,YAAcV,MAAM,CAACW,QADZ,CAET,gBAAkB,UAAYR,MAFrB,CADyB,CAAb,EAKlBS,GALkB,CAKd,qCALc,CADH,QACZC,MADY,eAQdC,SARc,CAQFD,MAAM,CAACE,IAAP,CAAYA,IARV,CASlB;AAEIC,OAXc,CAWJF,SAAS,CAACG,GAAV,CAAe,SAAAC,MAAM,CAAI,CACvC,MAAOA,CAAAA,MAAM,CAACC,OAAd,CACC,CAFa,CAXI,CAedC,OAfc,CAeJN,SAAS,CAACG,GAAV,CAAe,SAAAC,MAAM,CAAI,CACvC,MAAOA,CAAAA,MAAM,CAACG,OAAd,CACC,CAFa,CAfI,CAmBlB;AACIC,YApBc,CAoBC,oCApBD,CAqBdC,YArBc,CAqBC,oCArBD,CAuBdC,eAvBc,CAuBI,EAvBJ,CAwBdC,gBAxBc,CAwBK,EAxBL,CA0BlBT,OAAO,CAACC,GAAR,CAAY,SAAAS,EAAE,CAAI,CAClB,MAAQF,CAAAA,eAAe,CAAGA,eAAe,cAASE,EAAT,KAAzC,CACC,CAFD,EAGAN,OAAO,CAACH,GAAR,CAAY,SAAAS,EAAE,CAAI,CAClB,MAAQD,CAAAA,gBAAgB,CAAGA,gBAAgB,cAASC,EAAT,KAA3C,CACC,CAFD,EAIA;AACIC,aAlCc,CAkCEL,YAAY,CAAGE,eAlCjB,CAmCdI,aAnCc,CAmCEL,YAAY,CAAGE,gBAnCjB,CAqClB;AArCkB,uBAsCK1B,CAAAA,KAAK,CAACU,MAAN,CAAa,CACpCC,OAAO,CAAE,CACT,YAAcV,MAAM,CAACW,QADZ,CAET,gBAAkB,UAAYR,MAFrB,CAD2B,CAAb,EAKpBS,GALoB,CAKhBe,aALgB,CAtCL,SAsCdE,UAtCc,sCA4CG9B,CAAAA,KAAK,CAACU,MAAN,CAAa,CAClCC,OAAO,CAAE,CACT,YAAcV,MAAM,CAACW,QADZ,CAET,gBAAkB,UAAYR,MAFrB,CADyB,CAAb,EAKlBS,GALkB,CAKdgB,aALc,CA5CH,SA4CdE,QA5Cc,eAmDdC,cAnDc,CAmDGF,UAAU,CAACd,IAAX,CAAgBA,IAnDnB,CAoDdiB,SApDc,CAoDFF,QAAQ,CAACf,IAAT,CAAcA,IApDZ,CAsDlB;AAEA;AACIkB,UAzDc,CAyDDnB,SAAS,CAACG,GAAV,CAAc,SAAAC,MAAM,CAAI,CAEzCA,MAAM,CAACgB,QAAP,CAAkB,EAAlB,CACAhB,MAAM,CAACiB,OAAP,CAAiB,EAAjB,CACAjB,MAAM,CAACkB,KAAP,CAAe,EAAf,CAEAL,cAAc,CAACM,OAAf,CAAuB,SAAAC,IAAI,CAAI,CAC/BN,SAAS,CAACK,OAAV,CAAkB,SAAAE,IAAI,CAAI,CAC1B,GAAGrB,MAAM,CAACG,OAAP,GAAmBkB,IAAI,CAACb,EAAxB,EAA8BR,MAAM,CAACC,OAAP,GAAmBmB,IAAI,CAACZ,EAAzD,CAA6D,CAC7DR,MAAM,CAACgB,QAAP,CAAkBI,IAAI,CAACA,IAAvB,CACApB,MAAM,CAACiB,OAAP,CAAiBI,IAAI,CAACC,iBAAtB,CACAtB,MAAM,CAACkB,KAAP,CAAeG,IAAI,CAACH,KAApB,CACC,CACA,CAND,EAOC,CARD,EAUA,MAAOlB,CAAAA,MAAP,CACC,CAjBgB,CAzDC,CA4ElBX,aAAa,CAAC0B,UAAU,CAACQ,KAAX,CAAiB,CAAjB,CAAmB,CAAnB,CAAD,CAAb,CA5EkB,uDAAH,kBAATjC,CAAAA,SAAS,0CAAf,CAgFAA,SAAS,GACR,CAlFQ,CAkFN,CAACL,MAAD,CAlFM,CAAT,CAoFA;AAEA,mBACG,2BAAK,SAAS,CAAC,SAAf,eACI,0BAAI,SAAS,CAAC,cAAd,4BADJ,cAEI,0BAAI,SAAS,CAAC,aAAd,EACKG,UAAU,CAACW,GAAX,CAAe,SAACC,MAAD,CAASwB,KAAT,qBACZ,oBAAC,IAAD,EAAM,GAAG,CAAEA,KAAX,CAAkB,SAAS,CAAC,MAA5B,CACA,EAAE,CAAE,CACAC,QAAQ,iBAAWzB,MAAM,CAACkB,KAAlB,CADR,CADJ,eAII,0BAAI,GAAG,CAAEM,KAAT,CAAgB,SAAS,CAAC,sBAA1B,eACI,2BAAK,GAAG,CAAExB,MAAM,CAACiB,OAAjB,CAA0B,SAAS,CAAC,iBAApC,CAAsD,GAAG,CAAC,WAA1D,EADJ,cAEI,2BAAK,SAAS,CAAC,YAAf,EACKjB,MAAM,CAAC0B,SADZ,CAFJ,cAKI,2BAAK,SAAS,CAAC,aAAf,eACI,2BAAK,SAAS,CAAC,YAAf,EADJ,cAEI,+BAAM1B,MAAM,CAAC2B,YAAb,CAFJ,CALJ,cASI,2BAAK,SAAS,CAAC,iBAAf,EACK3B,MAAM,CAACgB,QADZ,CATJ,CAJJ,CADY,EAAf,CADL,CAFJ,CADH,CA2BA,CAvHD,CAwHA,cAAehC,CAAAA,OAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Axios from 'axios';\nimport Config from '../Config';\nimport { Link } from 'react-router-dom';\n\nconst Sidebar = () => {\n\n const oToken = sessionStorage.getItem('theToken');\n\n const [topStreams, setTopStreams] = useState([]);\n\n useEffect(() => {\n const fetchData = async () => {\n const result = await Axios.create({\n headers: {\n 'Client-ID' : Config.clientID,\n 'Authorization' : 'Bearer ' + oToken\n }\n }).get('https://api.twitch.tv/helix/streams');\n\n let dataArray = result.data.data;\n // console.log(dataArray);\n\n let gameIDs = dataArray.map( stream => {\n return stream.game_id;\n });\n\n let userIDs = dataArray.map( stream => {\n return stream.user_id;\n });\n\n //Creation des URLs personnalisées\n let baseUrlGames = \"https://api.twitch.tv/helix/games?\"\n let baseUrlUsers = \"https://api.twitch.tv/helix/users?\"\n\n let queryParamsGame = \"\";\n let queryParamsUsers = \"\";\n\n gameIDs.map(id => {\n return (queryParamsGame = queryParamsGame + `id=${id}&`)\n });\n userIDs.map(id => {\n return (queryParamsUsers = queryParamsUsers + `id=${id}&`)\n });\n\n //URL final\n let urlFinalGames = baseUrlGames + queryParamsGame;\n let urlFinalUsers = baseUrlUsers + queryParamsUsers;\n\n //Appels\n let gamesNames = await Axios.create({\n headers: {\n 'Client-ID' : Config.clientID,\n 'Authorization' : 'Bearer ' + oToken\n }\n }).get(urlFinalGames);\n let getUsers = await Axios.create({\n headers: {\n 'Client-ID' : Config.clientID,\n 'Authorization' : 'Bearer ' + oToken\n }\n }).get(urlFinalUsers);\n\n let gamesNameArray = gamesNames.data.data;\n let userArray = getUsers.data.data;\n\n // console.log(gamesNameArray, userArray);\n\n //Création du tableau final\n let finalArray = dataArray.map(stream => {\n\n stream.gameName = \"\";\n stream.truePic = \"\";\n stream.login = \"\";\n\n gamesNameArray.forEach(name => {\n userArray.forEach(user => {\n if(stream.user_id === user.id && stream.game_id === name.id) {\n stream.gameName = name.name;\n stream.truePic = user.profile_image_url;\n stream.login = user.login;\n }\n })\n });\n\n return stream\n })\n\n setTopStreams(finalArray.slice(0,6));\n\n }\n\n fetchData();\n }, [oToken])\n\n // console.log(topStreams);\n\n return(\n    <div className=\"sidebar\">\n        <h2 className=\"titreSidebar\">Chaines recommandées</h2>\n        <ul className=\"listeStream\">\n            {topStreams.map((stream, index) => (\n                <Link key={index} className=\"lien\"\n                to={{\n                    pathname: `/live/${stream.login}`\n                }}>\n                    <li key={index} className=\"containerFlexSidebar\">\n                        <img src={stream.truePic} className=\"profilePicRonde\" alt=\"logo user\"/>\n                        <div className=\"streamUser\">\n                            {stream.user_name}\n                        </div>\n                        <div className=\"viewerRight\">\n                            <div className=\"pointRouge\"></div>\n                            <div>{stream.viewer_count}</div>\n                        </div>\n                        <div className=\"gameNameSidebar\">\n                            {stream.gameName}\n                        </div>\n                    </li>\n                </Link>\n            ))}\n        </ul>\n    </div>\n )\n}\nexport default Sidebar;"]},"metadata":{},"sourceType":"module"}