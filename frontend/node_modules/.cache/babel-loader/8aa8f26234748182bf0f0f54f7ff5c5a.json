{"ast":null,"code":"import _regeneratorRuntime from\"/Users/oceane/Documents/Sites/clone-twitch/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/oceane/Documents/Sites/clone-twitch/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Config from'../Config';import Axios from'axios';var Connexion=function Connexion(){var url=window.location.search;var urlParams=new URLSearchParams(url);//Une fois que l'user à valider son authentification, Twitch nous fourni un code dans l'url (valeur du parametre \"code\")\n//Ici, on récupère ce paramètre\nvar code=urlParams.get('code');var oToken='';//Ici, on envoie une requete POST à twitch avec les différents paramètres requis pour que Twitch nous remet un token d'acces\nvar token=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.post(\"https://id.twitch.tv/oauth2/token?client_id=\".concat(Config.clientID,\"&client_secret=\").concat(Config.clientSecret,\"&code=\").concat(code,\"&grant_type=authorization_code&redirect_uri=\").concat(Config.redirectURI)).then(function(res){oToken=res.data.access_token;// console.log(res.data);\nsessionStorage.setItem('theToken',oToken);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function token(){return _ref.apply(this,arguments);};}();token();return null;};export default Connexion;","map":{"version":3,"sources":["/Users/oceane/Documents/Sites/clone-twitch/frontend/src/components/Connexion/index.js"],"names":["Config","Axios","Connexion","url","window","location","search","urlParams","URLSearchParams","code","get","oToken","token","post","clientID","clientSecret","redirectURI","then","res","data","access_token","sessionStorage","setItem"],"mappings":"iVAAA,MAAOA,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAEvB,GAAMC,CAAAA,GAAG,CAAGC,MAAM,CAACC,QAAP,CAAgBC,MAA5B,CAEA,GAAMC,CAAAA,SAAS,CAAG,GAAIC,CAAAA,eAAJ,CAAoBL,GAApB,CAAlB,CAEA;AACA;AACA,GAAMM,CAAAA,IAAI,CAAGF,SAAS,CAACG,GAAV,CAAc,MAAd,CAAb,CAEA,GAAIC,CAAAA,MAAM,CAAG,EAAb,CAEA;AACA,GAAMC,CAAAA,KAAK,0FAAG,yJACRX,CAAAA,KAAK,CAACY,IAAN,uDAA0Db,MAAM,CAACc,QAAjE,2BAA2Fd,MAAM,CAACe,YAAlG,kBAAuHN,IAAvH,wDAA0KT,MAAM,CAACgB,WAAjL,GAAgMC,IAAhM,CAAsM,SAACC,GAAD,CAAS,CACrNP,MAAM,CAAGO,GAAG,CAACC,IAAJ,CAASC,YAAlB,CACA;AACAC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAmCX,MAAnC,EACC,CAJK,CADQ,uDAAH,kBAALC,CAAAA,KAAK,0CAAX,CAQAA,KAAK,GAEL,MAAO,KAAP,CAEA,CAzBD,CA2BA,cAAeV,CAAAA,SAAf","sourcesContent":["import Config from '../Config';\nimport Axios from 'axios';\n\nconst Connexion = () => {\n\n const url = window.location.search;\n\n const urlParams = new URLSearchParams(url);\n\n //Une fois que l'user à valider son authentification, Twitch nous fourni un code dans l'url (valeur du parametre \"code\")\n //Ici, on récupère ce paramètre\n const code = urlParams.get('code');\n\n let oToken = '';\n\n //Ici, on envoie une requete POST à twitch avec les différents paramètres requis pour que Twitch nous remet un token d'acces\n const token = async () => { \n await Axios.post(`https://id.twitch.tv/oauth2/token?client_id=${Config.clientID}&client_secret=${Config.clientSecret}&code=${code}&grant_type=authorization_code&redirect_uri=${Config.redirectURI}`).then( (res) => {\n oToken = res.data.access_token;\n // console.log(res.data);\n sessionStorage.setItem('theToken', oToken);\n });\n }\n\n token();\n\n return(null);\n\n}\n\nexport default Connexion;"]},"metadata":{},"sourceType":"module"}