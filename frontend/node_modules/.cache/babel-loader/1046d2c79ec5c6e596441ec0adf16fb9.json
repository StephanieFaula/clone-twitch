{"ast":null,"code":"import Config from '../Config';\nimport Axios from 'axios';\n\nconst Connexion = () => {\n  const url = window.location.search;\n  const urlParams = new URLSearchParams(url); //Une fois que l'user à valider son authentification, Twitch nous fourni un code dans l'url (valeur du parametre \"code\")\n  //Ici, on récupère ce paramètre\n\n  const code = urlParams.get('code');\n  let oToken = ''; //Ici, on envoie une requete POST à twitch avec les différents paramètres requis pour que Twitch nous remet un token d'acces\n\n  const token = async () => {\n    await Axios.post(`https://id.twitch.tv/oauth2/token?client_id=${Config.clientID}&client_secret=${Config.clientSecret}&code=${code}&grant_type=authorization_code&redirect_uri=${Config.redirectURI}`).then(res => {\n      oToken = res.data.access_token; // console.log(res.data);\n\n      sessionStorage.setItem('theToken', oToken);\n    });\n  };\n\n  token();\n  return null;\n};\n\nexport default Connexion;","map":{"version":3,"sources":["/Users/oceane/Documents/Sites/clone-twitch/frontend/src/components/Config/index.js"],"names":["Config","Axios","Connexion","url","window","location","search","urlParams","URLSearchParams","code","get","oToken","token","post","clientID","clientSecret","redirectURI","then","res","data","access_token","sessionStorage","setItem"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAEvB,QAAMC,GAAG,GAAGC,MAAM,CAACC,QAAP,CAAgBC,MAA5B;AAEA,QAAMC,SAAS,GAAG,IAAIC,eAAJ,CAAoBL,GAApB,CAAlB,CAJuB,CAMvB;AACA;;AACA,QAAMM,IAAI,GAAGF,SAAS,CAACG,GAAV,CAAc,MAAd,CAAb;AAEA,MAAIC,MAAM,GAAG,EAAb,CAVuB,CAYvB;;AACA,QAAMC,KAAK,GAAG,YAAY;AAC1B,UAAMX,KAAK,CAACY,IAAN,CAAY,+CAA8Cb,MAAM,CAACc,QAAS,kBAAiBd,MAAM,CAACe,YAAa,SAAQN,IAAK,+CAA8CT,MAAM,CAACgB,WAAY,EAA7L,EAAgMC,IAAhM,CAAuMC,GAAD,IAAS;AACrNP,MAAAA,MAAM,GAAGO,GAAG,CAACC,IAAJ,CAASC,YAAlB,CADqN,CAErN;;AACAC,MAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCX,MAAnC;AACC,KAJK,CAAN;AAKC,GAND;;AAQAC,EAAAA,KAAK;AAEL,SAAO,IAAP;AAEA,CAzBD;;AA2BA,eAAeV,SAAf","sourcesContent":["import Config from '../Config';\nimport Axios from 'axios';\n\nconst Connexion = () => {\n\n const url = window.location.search;\n\n const urlParams = new URLSearchParams(url);\n\n //Une fois que l'user à valider son authentification, Twitch nous fourni un code dans l'url (valeur du parametre \"code\")\n //Ici, on récupère ce paramètre\n const code = urlParams.get('code');\n\n let oToken = '';\n\n //Ici, on envoie une requete POST à twitch avec les différents paramètres requis pour que Twitch nous remet un token d'acces\n const token = async () => { \n await Axios.post(`https://id.twitch.tv/oauth2/token?client_id=${Config.clientID}&client_secret=${Config.clientSecret}&code=${code}&grant_type=authorization_code&redirect_uri=${Config.redirectURI}`).then( (res) => {\n oToken = res.data.access_token;\n // console.log(res.data);\n sessionStorage.setItem('theToken', oToken);\n });\n }\n\n token();\n\n return(null);\n\n}\n\nexport default Connexion;"]},"metadata":{},"sourceType":"module"}